<div class="friendResults">
    <div class="noResults">
        None of your friends matched your search
    </div>

    <% @friends.each do |friend| %>
        <div class="friendResult result round drop_shadow" 
             data-fb-id="<%= friend[:user].facebook_id %>"
             onmouseover="$('#friendFlyout<%= friend[:user].id %>').show()"
             onmouseout="$('#friendFlyout<%= friend[:user].id %>').hide()" >
            <div class="image grid_2 alpha">
                <%= image_tag "https://graph.facebook.com/#{
                      friend[:user].facebook_id}/picture" %>
            </div>
            <div class="information grid_4 omega">
                <span class="name">
                    <%= friend[:user].name %>
                </span><br />
                <% if friend[:empty] %>
                    <span style="font-style: italic"> 
                        No courses matching your search 
                    </span>
                <% end %>
                <%= raw((friend[:taking].map{ |result| 
                      "<span style='color: #00B945'>
                          #{result.department_abbr} #{result.number}
                       </span>"} +
                    friend[:shopping].map{ |result| 
                      "<span style='color: #FF9700'>
                          #{result.department_abbr} #{result.number}
                       </span>"} + 
                    friend[:avoiding].map{ |result| 
                      "<span style='color: red'>
                          #{result.department_abbr} #{result.number}
                       </span>"}).join(',')) %>
            </div>

            <div class="flyout round drop_shadow" 
                 id="friendFlyout<%= friend[:user].id %>">
                <div class="arrow">
                    <%= image_tag "search/tooltips/arrow_right.png",
                          :width => 20 %>
                </div>

                <div class="header" style='color: #00B945'>
                    Taking
                </div>
                <% friend[:taking_full].each do |course| %>
                    <div class="listing">
                        <span class="courseTitle">
                            <%= "#{course.department_abbr} #{course.number}" %>:
                        </span>
                        <%= course.title %>,
                        <span class="professor"><%= course.professor %></span>
                    </div>
                <% end %>
                <div class="header" style='color: #FF9700'>
                    Shopping
                </div>
                <% friend[:shopping_full].each do |course| %>
                    <div class="listing">
                        <span class="courseTitle">
                            <%= "#{course.department_abbr} #{course.number}" %>:
                        </span>
                        <%= course.title %>, 
                        <span class="professor"><%= course.professor %></span>
                    </div>
                <% end %>
                <div class="header" style='color: red'>
                    Avoiding
                </div>
                <% friend[:avoiding_full].each do |course| %>
                    <div class="listing">
                        <span class="courseTitle">
                            <%= "#{course.department_abbr} #{course.number}" %>:
                        </span>
                        <%= course.title %>,
                        <span class="professor"><%= course.professor %></span>
                    </div>
                <% end %>
            </div>
        </div>
    <% end %>
</div>
